{
  "replication_study": {
    "hypothesis": "Among adults aged 45+ who are hypertensive and report poor self-rated general health in IFLS4, each additional year of formal education will lower (negative marginal effect) the probability that the respondent is undiagnosed for hypertension.",
    "study_type": "Observational",
    "data_plan": {
      "dataset_identifier": "Indonesian Family Life Survey (IFLS) \u2013 Wave 4, raw microdata (file: replication_data.dta)",
      "source_type": "Nationally representative longitudinal household survey with nurse-collected biomarkers and detailed questionnaires.",
      "wave_or_subset": "Wave 4 (2007\u20132008) \u2013 adults aged \u226545; analytic subsample restricted to hypertensive respondents in poor general health.",
      "sample_size": "Full file: 51 731 individuals; analytic subsample \u2248 4 200 hypertensives, of which \u2248 1 700 in poor health (exact N printed by script).",
      "unit_of_analysis": "Individual respondent",
      "access_details": "The dta file is shipped in \u201c/app/data/replication_data.dta\u201d. IFLS is publicly downloadable from RAND upon registration.",
      "qualification": {
        "explanation": "The raw IFLS4 micro-data allow complete re-construction of the variables used in the original claim from Kim & Radoias (2016), while enabling independent coding decisions and transparency.",
        "similarity_to_original": "Same survey (IFLS4) and period as reported in post_registration.json \u2192 data.source + wave_or_subset, ensuring identical measurement of blood-pressure, diagnosis, education, and covariates.",
        "deviation_from_original": "We start from the raw, unreduced file (replication_data.dta) instead of the authors\u2019 cleaned analytic file. All variables (e.g., hypertension, undiagnosed, years of schooling) are re-derived via our Python script rather than copied from the authors\u2019 Stata output, providing an independent computational replication (see Stata logic in \u201cKim & Radoias 2016 - Replication Analysis.do\u201d)."
      },
      "notes": "Key variables (us07*, cd05, dl04/dl06/dl07, kk01, ar09, sex) are present. Minor coding simplifications versus the original Stata script (education mapping) are documented in replicate_analysis.py."
    },
    "planned_method": {
      "steps": "1. Load replication_data.dta.\n2. Calculate average systolic/diastolic BP (us07b1/us07c1; us07b2/us07c2).\n3. Define hypertension (systolic>140 OR diastolic>90) and set missing if any BP missing.\n4. Define \u2018under-diagnosed\u2019 =1 if hypertensive & never told by doctor (cd05==3).\n5. Construct years of schooling (yrs_school) following authors\u2019 mapping where possible; fallback to dl07 values.\n6. Create covariates: age, age\u00b2, female dummy, poor-health dummy (kk01==3/4).\n7. Restrict to poor-health hypertensive subsample.\n8. Drop observations with missing outcome or education.\n9. Estimate probit model: under_diag ~ yrs_school + age + age\u00b2 + female.\n10. Compute marginal effect of yrs_school.\n11. Save model summary & marginal effects to /app/data/replication_results.txt.",
      "models": "Probit regression with average marginal effects (statsmodels).",
      "outcome_variable": "under_diag (binary: 1 = hypertensive but never diagnosed).",
      "independent_variables": "yrs_school (years of formal education).",
      "control_variables": "age, agesqrt, female.",
      "tools_software": "Python 3.10; pandas, numpy, pyreadstat, statsmodels.",
      "planned_estimation_and_test": {
        "estimation": "Average marginal effect of yrs_school on probability of being undiagnosed.",
        "test": "Wald z-test on marginal effect (two-tailed, \u03b1 = 0.05)."
      },
      "missing_data_handling": "List-wise deletion on variables in the model.",
      "multiple_testing_policy": "Not applicable (single focal test).",
      "inference_criteria": "Replication succeeds if marginal effect on yrs_school is negative and statistically significant at p < 0.05 (two-tailed); magnitude compared against original \u22120.0087."
    },
    "codebase": {
      "files": {
        "replication_data/replicate_analysis.py": "End-to-end script performing data preparation, probit estimation, marginal-effect calculation, and saving results. Reads /app/data/replication_data.dta and writes /app/data/replication_results.txt."
      },
      "notes": "The script is a Python translation/condensation of the provided Stata do-file. All I/O paths adhere to the /app/data requirement."
    },
    "docker_specs": {
      "base_image": "python:3.10-slim",
      "packages": {
        "python": [
          "pandas>=1.5.0",
          "numpy>=1.23.0",
          "statsmodels>=0.14.0",
          "pyreadstat>=1.2.0"
        ],
        "other": [
          "gcc",
          "g++",
          "make"
        ]
      },
      "hardware": {
        "gpu_support": "false",
        "min_gpu_memory_gb": "0",
        "min_ram_gb": "4"
      },
      "volumes": [
        "./data:/app/data"
      ]
    },
    "analysis": {
      "instructions": "Inside the container, run:  python replication_data/replicate_analysis.py  (working directory /app). This generates replication_results.txt containing the probit table and marginal effects.",
      "comparison_metrics": "Direction (sign), statistical significance (p < 0.05), and magnitude of marginal effect of yrs_school versus original (\u22120.00867, SE = 0.00420)."
    }
  }
}