{
  "replication_study": {
    "hypothesis": "In PISA 2012 data, the interaction between student-reported use of memorization strategies and school-average mathematics ability will be negative in its association with mathematics self-concept, controlling for individual mathematics ability (including plausible values), and appropriate covariates. Operationalized: In a multilevel linear model (students nested in schools nested in countries), the coefficient on school_average_math_ability \u00d7 memorization_strategy predicting math_self_concept is less than 0.",
    "study_type": "Observational",
    "data_plan": {
      "dataset_identifier": "PISA 2012 replication dataset (PISA2012.replication.RDS / PISA2012.replication.pkl)",
      "source_type": "International assessment survey (OECD PISA student assessment)",
      "wave_or_subset": "PISA 2012; multi-country student sample (based on replication_data contents)",
      "sample_size": "To be confirmed after loading PISA2012.replication.RDS (rows in dataset).",
      "unit_of_analysis": "Individual student (Level 1), nested within schools (Level 2), nested within countries (Level 3)",
      "access_details": "Provided within the replication_data folder; no external access required for this replication run.",
      "qualification": {
        "explanation": "This dataset (PISA 2012) constitutes a different wave from the original study\u2019s PISA 2003, thus offering an independently collected sample under similar survey design and constructs, allowing a robust test of the moderation effect (memorization \u00d7 school-average ability) on mathematics self-concept.",
        "similarity_to_original": "The original study used PISA 2003 data with constructs including mathematics self-concept, plausible values of math ability, school-average ability, and learning strategies including memorization (post_registration.json: original_study.data.source; method description and variables). The replication dataset is labeled PISA2012.replication.RDS and PISA2012.replication.pkl (replication_data folder listing), which strongly suggests the same PISA framework with analogous constructs in 2012.",
        "deviation_from_original": "Original used PISA 2003 across 41 countries and 276,165 students (post_registration.json). Replication data appears to be from PISA 2012 (replication_data folder: PISA2012.replication.RDS/.pkl), which is a later wave with potentially different participating countries, sample composition, and item parameterizations; thus it provides a new, independent sample while maintaining the PISA structure and constructs."
      },
      "notes": "We will verify exact variable names in PISA2012.replication.RDS (e.g., math_self_concept scale, memorization strategy scale, school-average ability, plausible values). If scales are precomputed in the RDS/PKL, we will use the provided standardized forms; otherwise, we will compute standardized scores and school means. All file IO will be confined to /app/data at runtime."
    },
    "planned_method": {
      "steps": "- Load PISA2012.replication.RDS from /app/data.\n- Inspect and confirm variable names for: mathematics self-concept (dependent), memorization strategy, individual math ability (plausible values), school ID, country ID, and any precomputed school-average math ability.\n- If school-average ability is not present, compute it by aggregating plausible values at the school level (per plausible value) and merging back to students.\n- Center variables if required (e.g., grand-mean center memorization and school-average ability) to match interpretability conventions.\n- Fit three-level multilevel linear models (students within schools within countries) per plausible value of math ability, including main effects and the focal interaction: memorization \u00d7 school-average ability, plus standard controls as available (e.g., individual ability terms).\n- Combine results over plausible values using Rubin\u2019s rules or average coefficients and use conservative SE aggregation if the dataset provides guidance; otherwise, report per-plausible-value estimates with consistency checks.\n- Save model summaries, coefficients, and diagnostics to /app/data.\n- Compare the sign and magnitude of the interaction to the original claim (expect negative, e.g., around -0.089 as in initial_details.txt).",
      "models": "Three-level multilevel linear models (LMM): math_self_concept ~ memorization + school_avg_ability + memorization:school_avg_ability + individual_ability (PV) [+ optional covariates], with random intercepts for schools and countries.",
      "outcome_variable": "Mathematics self-concept (scale; expected standardized or z-scored).",
      "independent_variables": "Memorization strategy scale (student-reported), school-average mathematics ability (computed from student plausible values), and their interaction.",
      "control_variables": "Individual mathematics ability (plausible values; linear and, if applicable, quadratic), and any standard covariates included in the dataset that align with the original study\u2019s specifications (e.g., SES, motivation) if available. At minimum, control for individual ability and possibly country/school random intercepts.",
      "tools_software": "Python (pandas, numpy, statsmodels, pyreadr for RDS reading).",
      "planned_estimation_and_test": {
        "estimation": "Interaction coefficient: beta_memorization_x_school_avg_ability in multilevel linear model predicting math_self_concept.",
        "test": "t-tests/Wald tests for fixed effects in the multilevel model; significance assessed per plausible value or combined estimate if pooling is applied."
      },
      "missing_data_handling": "Listwise deletion for the required variables (math_self_concept, memorization, plausible values, school/country IDs). If missingness is substantial, consider multiple imputation as a sensitivity analysis.",
      "multiple_testing_policy": "Primary focus on a single focal interaction; no multiple testing correction required for the main claim. If exploring multiple moderators, use FDR or Bonferroni as sensitivity.",
      "inference_criteria": "Two-sided tests at alpha=0.05 with emphasis on directionality (expect negative interaction). If sample size is very large, consider effect size and practical significance alongside p-values."
    },
    "codebase": {
      "files": {
        "replicate_bflpe_memorization__py.py": "Python script to load /app/data/PISA2012.replication.RDS, verify/compute variables, fit three-level multilevel linear models per plausible value using statsmodels (or mixedlm), estimate the focal interaction (memorization \u00d7 school-average ability), and save results to /app/data/model_results.json and /app/data/model_summaries.txt. It replaces the provided R script (!!CORRECTION!!_Seaton_AmEduResJourn_2010_Blxd_final.R) per RUN POLICY.",
        "data_checks__py.py": "Python utility to load the dataset from /app/data, print columns, head, shapes, and simple summaries for the key variables; ensures consistent IO and preprocessing.",
        "README_replication.txt": "Plain-text instructions to run the Python scripts inside the container, noting that all IO must be under /app/data."
      },
      "notes": "Non-Python scripts (.R) will remain unmodified, but we will not execute them; Python rewrites will be the entry point. All IO paths will use /app/data. Dependencies include pyreadr for RDS and statsmodels for multilevel modeling. If needed, we may fall back to per-country fixed effects or two-level modeling if three-level is not feasible with statsmodels; we will document any such deviation."
    },
    "docker_specs": {
      "base_image": "python:3.10-slim",
      "packages": {
        "python": [
          "pandas>=2.0.0",
          "numpy>=1.24.0",
          "pyreadr>=0.4.7",
          "statsmodels>=0.14.0",
          "scipy>=1.10.0",
          "pyyaml>=6.0",
          "matplotlib>=3.7.0"
        ],
        "other": [
          "git",
          "wget"
        ]
      },
      "hardware": {
        "gpu_support": "false",
        "min_gpu_memory_gb": "0",
        "min_ram_gb": "8"
      },
      "volumes": [
        "./data:/app/data"
      ]
    },
    "analysis": {
      "instructions": "- Place PISA2012.replication.RDS under ./data (mounted to /app/data inside the container).\n- Run data_checks__py.py to confirm variables and shapes.\n- Run replicate_bflpe_memorization__py.py to fit the models and generate /app/data/model_results.json and /app/data/model_summaries.txt.\n- Review the focal interaction coefficient(s) and compare sign and magnitude to the original claim.",
      "comparison_metrics": "Sign and direction of the memorization \u00d7 school-average ability coefficient (expect negative); magnitude compared to original (-0.089; effect size -0.157 in initial_details.txt); statistical significance (p-value); robustness across plausible values and sensitivity models."
    }
  }
}