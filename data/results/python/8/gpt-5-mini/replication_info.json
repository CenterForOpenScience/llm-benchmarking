{
  "replication_study": {
    "hypothesis": "Households/illness episodes exposed to any ACT voucher subsidy (act_subsidy == 1) have a higher probability of taking ACT (took_ACT) than those not exposed, conditional on strata and covariates.",
    "study_type": "Experimental (analysis of randomized treatment indicators in survey/administrative dataset)",
    "data_plan": {
      "dataset_identifier": "ReplicationData_Cohen_AmEcoRev_2015_2lb5.dta (provided in ./data/original/8/python/replication_data)",
      "source_type": "Survey and administrative drug shop records (endline household illness/treatment survey + voucher redemption logs) as documented by the original study",
      "wave_or_subset": "Analyses use post-baseline waves only (wave != 0) and are restricted to observations with maltest_where == 1 (CHW sample) per the original .do file",
      "sample_size": "7416 observations (rows) in the provided .dta (shape reported by dataset inspection)",
      "unit_of_analysis": "Illness episode / individual (each observation is an illness episode reported in the survey)",
      "access_details": "Dataset included in the repository at ./data/original/8/python/replication_data/ReplicationData_Cohen_AmEcoRev_2015_2lb5.dta (no external access required for replication of provided analysis)",
      "qualification": {
        "explanation": "This dataset is directly provided alongside the replication materials and contains the randomized treatment indicators and outcome variables used by the original analysis, enabling a direct replication of the focal estimate. The supplied .do file documents the variable transformations and sample restrictions that match the authors' approach, which I followed when translating to Python. (Files used: ./data/original/8/python/replication_data/ReplicationData_Cohen_AmEcoRev_2015_2lb5.dta and ./data/original/8/python/replication_data/Cohen et al 2015 - Replication Analysis.do.)",
        "similarity_to_original": "The dataset contains the key variables referenced in the original study and post-registration summary: drugs_taken_AL (outcome, renamed took_ACT), maltest_chw_voucher_given (ACT voucher treatment indicator), maltest_where (where malaria test was taken), wave (data collection period), cu_code (strata), weight (sampling weight), and SES/item variables used as covariates. Post-registration summary describing design and primary outcomes is at ./data/original/8/python/post_registration.json (see 'data' and 'method' sections). The initial claim text with coefficient and SE is in ./data/original/8/python/initial_details.txt.",
        "deviation_from_original": "The provided dataset appears to be the replication data distributed with the paper (file: ReplicationData_Cohen_AmEcoRev_2015_2lb5.dta). The post-registration.json describes the original RCT design and outcomes; the replication data aligns with those sources. Any deviation is minimal and only due to how missing codes are encoded (e.g., maltest_chw_voucher_given==98 treated as missing in the .do file). The .do implements sample restrictions (maltest_where==1 & wave!=0) which I reproduce. Specific references: sample design and outcomes in ./data/original/8/python/post_registration.json; focal claim and reported coefficient in ./data/original/8/python/initial_details.txt; exact processing and sample restrictions in ./data/original/8/python/replication_data/Cohen et al 2015 - Replication Analysis.do."
      },
      "notes": "Observed variables: ['cu_code','sub_county','health_facility','group','weight','wave','patient_age_categ','patient_gender','malaria_test_done','maltest_where','maltest_chw_voucher_given','maltest_result','drugs_taken_AL', ... , 'ses_*' variables] (full column list read from the .dta). The dataset has 7,416 rows and 53 columns. Some survey variables (e.g., ses_fuel_type) have no observations in the subsample (not used). Missing-value codes are present (e.g., 98) and were handled as in the .do file (treated as missing). All IO for replication code is required to use /app/data and was implemented accordingly."
    },
    "planned_method": {
      "steps": [
        "1) Run the Python script that replicates the Stata .do logic: ./data/original/8/python/replication_data/Cohen_et_al_2015_replication__py.py",
        "2) Script loads ReplicationData_Cohen_AmEcoRev_2015_2lb5.dta from /app/data/... and creates variables: took_ACT (from drugs_taken_AL), act_subsidy (maltest_chw_voucher_given==1, with 98 -> missing), household id (hh_id), strata (cu_code), asset indicators and SES covariates following the .do file logic.",
        "3) Subset the sample to maltest_where == 1 & wave != 0 (as in the .do file).",
        "4) Estimate OLS of took_ACT on act_subsidy plus covariates (refrigerator, mobile, vip_toilet, composting_toilet, other_toilet, stone_wall, cement_wall, num_sheep) and strata fixed effects (cu_code). Use sampling weights if available.",
        "5) Compute cluster-robust standard errors clustered at hh_id (household) and save the regression summary and coefficient table to the replication_data folder.",
        "6) Compare the estimate, standard error, p-value, and direction for act_subsidy to the original reported estimate (initial_details.txt: coefficient 0.187, clustered SE 0.038)."
      ],
      "models": "Linear regression (OLS) with strata fixed effects and cluster-robust standard errors by household. If sampling weights are present, the script fits WLS with the provided weights and obtains cluster-robust SEs (closest practical approach to Stata 'svy' + clustered SEs within Python/statsmodels).",
      "outcome_variable": "took_ACT (renamed from drugs_taken_AL in the .dta) \u2014 indicator for whether the illness episode was treated with ACT.",
      "independent_variables": "Primary: act_subsidy (indicator derived from maltest_chw_voucher_given==1). Interaction terms are not required for the focal replication of the primary claim; they can be added in extended analyses.",
      "control_variables": "Covariates used in the .do file: strata fixed effects (cu_code), refrigerator, mobile, vip_toilet, composting_toilet, other_toilet, stone_wall, cement_wall, num_sheep. The exact covariate list is present in the .do file as local covariates (see ./data/original/8/python/replication_data/Cohen et al 2015 - Replication Analysis.do).",
      "tools_software": "Python 3.10+; key packages: pandas, statsmodels, numpy. The Python script reads the .dta using pandas.read_stata and performs regressions via statsmodels.",
      "planned_estimation_and_test": {
        "estimation": "Estimate the OLS coefficient (point estimate) on act_subsidy representing the change in probability of taking ACT associated with any ACT voucher subsidy.",
        "test": "t-test for the null hypothesis that the coefficient on act_subsidy equals zero; use cluster-robust SEs (clustered by hh_id) to construct the t-statistic and p-value."
      },
      "missing_data_handling": "Listwise deletion for regression variables (observations with missing outcome or key regressors are excluded). Special missing codes handled per the .do file (e.g., maltest_chw_voucher_given == 98 set to missing).",
      "multiple_testing_policy": "Primary replication focuses on a single focal outcome and a single primary treatment indicator; no multiple-testing correction planned for the focal test. If multiple secondary outcomes or subgroups are tested, apply False Discovery Rate (Benjamini-Hochberg) or pre-specified familywise corrections in extended analyses.",
      "inference_criteria": "Statistical significance judged at conventional thresholds (p < 0.05 for significance; report p < 0.01 and p < 0.10 as well). Directionality is one-sided in scientific claim (positive effect predicted), but two-sided tests will be reported; emphasis on sign and magnitude matching the original reported positive effect (original initial_details.txt reports coefficient 0.187, SE 0.038, significant at 1%)."
    },
    "codebase": {
      "files": {
        "./replication_data/Cohen_et_al_2015_replication__py.py": "Python translation of the provided Stata .do file. Reads the .dta from /app/data, creates the variables (took_ACT, act_subsidy, hh_id, strata, asset indicators, SES and covariates), subsets sample (maltest_where==1 & wave!=0), estimates OLS/WLS with cluster-robust standard errors by household, and writes two outputs: Cohen_et_al_2015_regression_summary.txt and Cohen_et_al_2015_regression_coeffs.csv to ./data/original/8/python/replication_data. This is the primary executable for replication.",
        "./data/original/8/python/replication_data/ReplicationData_Cohen_AmEcoRev_2015_2lb5.dta": "Primary dataset (Stata .dta) containing outcome, treatment indicators, survey weights, strata, and covariates used in the analysis. Required input for the Python script.",
        "./data/original/8/python/replication_data/Cohen et al 2015 - Replication Analysis.do": "Original Stata do-file included for reference documenting the authors' variable construction, sample restrictions, and regression commands. Not executed directly in the replication pipeline but used to guide the Python translation and to check fidelity."
      },
      "notes": "The Python script was written to use absolute paths under /app/data (script assumes dataset is at /app/data/original/8/python/replication_data/ReplicationData_Cohen_AmEcoRev_2015_2lb5.dta). All outputs are written to /app/data/original/8/python/replication_data. Dependencies are standard Python data science packages (pandas, statsmodels). The script attempts to follow the Stata operations closely (including handling of special missing codes like 98). If survey design replication with svy commands is required, more specialized survey packages (e.g., statsmodels.survey or R's survey package) could be used; the current approach approximates the Stata svy + cluster option by using WLS (for weights) and cluster-robust SEs."
    },
    "docker_specs": {
      "base_image": "python:3.10-slim",
      "packages": {
        "python": [
          "pandas>=1.4.0",
          "numpy>=1.22.0",
          "statsmodels>=0.13.0",
          "scipy>=1.8.0",
          "pyreadstat>=1.1.0 (optional, pandas.read_stata used but pyreadstat can help)",
          "matplotlib>=3.5.0 (optional, for plotting)"
        ],
        "other": [
          "git",
          "wget",
          "less"
        ]
      },
      "hardware": {
        "gpu_support": "false",
        "min_gpu_memory_gb": "0",
        "min_ram_gb": "4"
      },
      "volumes": [
        "./data:/app/data"
      ]
    },
    "analysis": {
      "instructions": "1) Ensure the repository is mounted at /app/data. 2) Install Python and required packages listed in docker_specs. 3) From the container or environment, run: python /app/data/original/8/python/replication_data/Cohen_et_al_2015_replication__py.py 4) The script will create two files in the replication_data folder: Cohen_et_al_2015_regression_summary.txt and Cohen_et_al_2015_regression_coeffs.csv. 5) Inspect the coefficient for act_subsidy, its standard error, and p-value; compare these to the original reported estimate (initial_details.txt: coefficient = 0.187, clustered SE = 0.038). 6) Document any discrepancies, check variable construction and sample restrictions (maltest_where == 1 & wave != 0), and if needed, iterate on covariate inclusion or survey-weight handling (e.g., using a more direct survey design replication).",
      "comparison_metrics": "Compare point estimate (coefficient on act_subsidy), standard error (cluster-robust SE), t-statistic, p-value, direction of effect, and sample size used in regression. Report differences between replication and original in absolute and relative terms (e.g., difference in coefficient and percent change, difference in SE). If available, compare 95% confidence intervals and p-value thresholds (p < 0.01 as in original claim)."
    }
  }
}