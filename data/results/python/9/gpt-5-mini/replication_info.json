{
  "replication_study": {
    "hypothesis": "On the economic policy dimension, party-system size (log count of relevant parties) is positively associated with party dispersion (log distance between the two most extreme parties) after controlling for electoral system type and lagged dispersion.",
    "study_type": "Observational",
    "data_plan": {
      "dataset_identifier": "CMP_final.dta & CPDS_final.dta (provided in ./data/original/9/python/replication_data/)",
      "source_type": "Archival / comparative manifesto data (party manifestos) merged with comparative political system data",
      "wave_or_subset": "All observations included in the supplied CMP_final.dta and CPDS_final.dta (CMP party manifestos pooled across multiple countries and elections; CPDS includes country-year electoral rule info). The original study used elections from post-WWII through the 1990s (post_registration.json). The provided data files include observations up through 2019 (see CPDS_final.dta \"year\" values and data content).",
      "sample_size": "To be computed precisely by executing the replication script. The original study pooled party observations across 20 parliamentary democracies (post_registration.json). The replication dataset supplied contains many countries and years (CPDS_final.dta contains country-year rows from 1945 through 2019). The final sample (country-election level) after the party inclusion filters and removing non-positive dispersions will be output by the replication script to /app/data/Andrews_Money_replication_data.csv and can be inspected for exact N.",
      "unit_of_analysis": "Country-election (party-system) level for regressions; original party-level data used to construct party positions but dispersion and regressions are at the country-election level.",
      "access_details": "Data files are supplied locally in the repository under ./data/original/9/python/replication_data/. No external access or special requests are required for these supplied files.",
      "qualification": {
        "explanation": "The provided CMP_final.dta and CPDS_final.dta include the manifest coding indicators and electoral-system variables needed to reconstruct PCA-based party positions, compute dispersion between extremes, and create party-count measures using the authors' seat-share persistence rules. The available variables and code implement the same logic the original authors described (party seat thresholds, PCA on specific CMP categories, dispersion as distance between most extreme parties, log transforms, and OLS with clustered SE). Sources: the original replication do-file included in ./data/original/9/python/replication_data/Andrews-Money_Replication.do (implements the exact steps), and post_registration.json (documents original data source and steps).",
        "similarity_to_original": "High-fidelity elements: (1) Same CMP coding categories for the economic PCA are present (per303, per401, per402, per403, per404, per407, per412, per413, per414, per504, per505, per701) \u2014 see the Stata do-file at ./data/original/9/python/replication_data/Andrews-Money_Replication.do and CMP_final.dta variable list (./data/original/9/python/replication_data/CMP_final.dta). (2) The party-inclusion rule (party with >=1% seats in at least two consecutive elections and not failed in three subsequent elections) is implemented per the do-file (same file). (3) The dispersion measure (distance between the two most extreme parties on the economic PCA dimension) and its log transform are constructed as in the do-file and described in post_registration.json.",
        "deviation_from_original": "Deviations: (1) Time coverage: post_registration.json states the original analysis used elections up through the 1990s; the supplied CPDS_final.dta and CMP_final.dta include observations through 2019 (see CPDS_final.dta 'year' values and long data content), which means the replication covers a longer time span and is thus a different sample (more recent elections). (2) PCA implementation detail: the Python script standardizes PCA inputs (mean zero, unit variance) prior to computing the first component using scikit-learn PCA to approximate Stata's pca behavior; small numeric differences relative to Stata's output are possible. (3) Implementation choices: minor implementation differences in handling of parties with missingness and exact edge cases might differ subtly from Stata's internal handling. Evidence of original waves and timeframe is in post_registration.json; the do-file used is at ./data/original/9/python/replication_data/Andrews-Money_Replication.do; the replication data files are ./data/original/9/python/replication_data/CMP_final.dta and ./data/original/9/python/replication_data/CPDS_final.dta."
      },
      "notes": "Caveats and potential issues: (1) PCA differences: Stata's pca behavior (centering/scaling default) may differ slightly from scikit-learn; this can cause minor numeric differences in party scores. I standardized variables prior to PCA to approximate correlation-based PCA but note this as a deviation. (2) Observations with non-positive dispersion (e.g., identical min and max due to missing scores) are dropped before log-transform; this reproduces the conceptual requirement but may slightly change sample size. (3) The do-file uses some temporary intermediate files (election_identifier.dta etc.); the Python script implements these steps in-memory and stores final outputs under /app/data as required. (4) All IO in the Python script uses /app/data paths, consistent with the run policy."
    },
    "planned_method": {
      "steps": [
        "Run the provided translation script: ./data/original/9/python/replication_data/Andrews_Money_Replication__py.py (it reads CMP_final.dta and CPDS_final.dta from /app/data/original/9/python/replication_data/ and saves outputs under /app/data).",
        "Merge CMP and CPDS on country-year after generating year from CMP edate as in the original do-file (see the script).",
        "Implement party inclusion filter: party has >=1% seats in at least two consecutive elections and does not fail to meet the threshold for three subsequent elections (translated logic from the do-file).",
        "Compute relative seat share, count parties per country-election, log-transform count of parties.",
        "Perform PCA on the CMP economic indicators (per303, per401, per402, per403, per404, per407, per412, per413, per414, per504, per505, per701) to extract the first component as the economic policy position (script standardizes inputs before PCA).",
        "For each country-election, identify extreme parties (min and max on the economic first component), compute dispersion = max - min, and log-transform dispersion (drop non-positive values prior to log).",
        "Construct controls: single_member electoral system dummy (prop == 0) and lagged log-dispersion by country id.",
        "Estimate OLS: dispersion_log ~ count_parties_log + single_member + lagged_dispersion with standard errors clustered by country (id_country).",
        "Save regression output and the final analysis dataset to /app/data for inspection and further robustness checks."
      ],
      "models": "Ordinary Least Squares (OLS) regression on country-election-level data; standard errors clustered by country (clustered robust SE).",
      "outcome_variable": "dispersion_log (natural log of the distance between the two most extreme parties on the economic PCA dimension).",
      "independent_variables": "Primary: count_parties_log (natural log of the number of relevant parties in the system).",
      "control_variables": "single_member (electoral system dummy: 1 if single-member district, 0 if proportional; missing if prop missing), lagged_dispersion (lag of dispersion_log by country).",
      "tools_software": "Python (script provided). Primary packages: pandas, numpy, scikit-learn, statsmodels, pyreadstat (pandas.read_stata uses pyreadstat). The translation Python script is at ./data/original/9/python/replication_data/Andrews_Money_Replication__py.py",
      "planned_estimation_and_test": {
        "estimation": "Estimate OLS coefficient on count_parties_log; primary target = coefficient (slope) representing the change in log dispersion per unit change in log count of parties.",
        "test": "Statistical significance assessed with t-test on the coefficient using cluster-robust standard errors clustered by country (two-sided test). Compare sign and statistical significance level to original reported effect (positive coefficient; original reported coefficient on log count = 0.39 for economic dimension per post_registration.json)."
      },
      "missing_data_handling": "Listwise deletion for observations missing key variables required for PCA, dispersion calculation, or regression (the script drops rows with missing PCA variables prior to PCA; country-election observations with missing dispersion or non-positive dispersion are removed prior to regression).",
      "multiple_testing_policy": "Primary focus is a single focal hypothesis (economic-dimension effect of party count). If multiple outcomes (e.g., social dimension) are tested, correction methods (Bonferroni or Benjamini-Hochberg) should be applied; for this replication the main test is unadjusted, matching the original study's focal analysis.",
      "inference_criteria": "Reproduction assesses whether the replication reproduces (a) a positive coefficient on log(count of parties) for economic dispersion and (b) statistical significance comparable to the original (original reported a statistically significant positive coefficient; post_registration.json reports coefficient 0.39). Standard significance threshold: p < 0.05. Primary inference also considers directionality (positive) and approximate magnitude."
    },
    "codebase": {
      "files": {
        "replication_data/Andrews_Money_Replication__py.py": "Python translation of the original Stata do-file. Reads CMP_final.dta and CPDS_final.dta from /app/data/original/9/python/replication_data/, implements party filters, PCA on specified per*** CMP indicators, computes dispersion between extremes, log-transforms dependent and independent variables, creates lagged dependent variable, and runs OLS with cluster-robust standard errors by country. Saves outputs to /app/data/Andrews_Money_replication_data.csv and /app/data/Andrews_Money_replication_results.txt. This is the execution entrypoint for the replication.",
        "replication_data/Andrews-Money_Replication.do": "Original Stata do-file (kept unchanged) included for provenance and to verify procedural steps. Not executed directly in this environment but used as the template for translation.",
        "replication_data/CMP_final.dta": "CMP party-level data used to compute PCA-based party positions and to provide party-level attributes (absseat, totseats, per303...per701).",
        "replication_data/CPDS_final.dta": "Country-year data with electoral system indicator (prop) and year required for merge and single-member coding."
      },
      "notes": "All I/O in the Python script is routed to /app/data as required. The original .do was translated into Python and saved with suffix __py.py. If additional scripts or automated wrappers are desired, the Python script can be wrapped in a small shell wrapper that runs it with 'python3'. Dependencies must be installed in the runtime environment (see docker_specs). The translated script attempts to preserve the logic, filters, and ordering in the original do-file; minor numeric differences are possible because PCA implementation and missing-value handling can differ slightly between Stata and scikit-learn/pandas."
    },
    "docker_specs": {
      "base_image": "python:3.10-slim",
      "packages": {
        "python": [
          "pandas>=1.4.0",
          "numpy>=1.22.0",
          "scikit-learn>=1.0.0",
          "statsmodels>=0.13.0",
          "pyreadstat>=1.1.0"
        ],
        "other": [
          "git",
          "wget",
          "unzip"
        ]
      },
      "hardware": {
        "gpu_support": "false",
        "min_gpu_memory_gb": "0",
        "min_ram_gb": "4"
      },
      "volumes": [
        "./data:/app/data"
      ]
    },
    "analysis": {
      "instructions": "1) Install dependencies in the container/environment (see docker_specs). 2) Ensure the data files are present at /app/data/original/9/python/replication_data/CMP_final.dta and /app/data/original/9/python/replication_data/CPDS_final.dta. 3) Run the replication entrypoint: python /app/data/original/9/python/replication_data/Andrews_Money_Replication__py.py. 4) Output files: /app/data/Andrews_Money_replication_data.csv (final country-election-level dataset used for regression) and /app/data/Andrews_Money_replication_results.txt (regression summary including coefficient, SE, t-stats, and p-values). 5) Compare the estimated coefficient for count_parties_log and its clustered SE/p-value to the original reported coefficient (post_registration.json reports coefficient 0.39 for economic dimension). For additional comparability, replicate also the social dimension by modifying pca_vars to the social CMP indicators (not included in this automatic script unless specified).",
      "comparison_metrics": "Primary metrics for comparing original and replication: (a) Estimated coefficient on log(count of parties) (direction and magnitude); (b) Clustered standard error for that coefficient; (c) t-statistic and p-value; (d) R-squared and adjusted R-squared; (e) Sample size (number of country-election observations used in regression). Also compare sign and whether effect is statistically significant at alpha = 0.05."
    }
  }
}