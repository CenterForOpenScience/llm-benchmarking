{
  "replication_study": {
    "hypothesis": "Respondents with a post-secular perspective (latent class derived from science knowledge, science attitudes, and religiosity indicators) will be less likely than respondents with a traditional perspective to respond that humans evolved from other animals (measured by evolved_clean = 1 for acceptance).",
    "study_type": "Observational",
    "data_plan": {
      "dataset_identifier": "GSSreplication.dta (GSS-derived; years spanning at least 2006\u20132018)",
      "source_type": "General Social Survey (GSS)-based dataset",
      "wave_or_subset": "Original focal period: 2006\u20132010 (post_registration.json). Replication data include 2012, 2014, 2016, 2018 (OBrienReplication_OSF_Axxe_20201012.do). We will analyze: (a) years <= 2010, (b) years > 2010, and (c) all years combined.",
      "sample_size": "To be computed at runtime after listwise deletion across LCA indicators (documented in outputs).",
      "unit_of_analysis": "Individual respondent",
      "access_details": "Local file provided: ./data/original/6/python/replication_data/GSSreplication.dta. At runtime, place it at /app/data/GSSreplication.dta.",
      "qualification": {
        "explanation": "This dataset is a GSS-derived file containing the same construct domains as the original (science knowledge items, science attitudes, religiosity, bible beliefs, and weights). It allows reconstructing latent classes and testing the same focal contrast on acceptance of evolution. It provides an independent sample (additional waves) to test robustness across time.",
        "similarity_to_original": "Both rely on GSS survey items. The original used 2006\u20132010 GSS (post_registration.json: data.source=GSS; wave_or_subset=2006\u20132010). The provided do-file confirms the same conceptual indicators (hotcore, radioact, bigbang, evolved, bible, reliten, science attitude items) are used to run LCA and then a t-test on evolved (OBrienReplication_OSF_Axxe_20201012.do).",
        "deviation_from_original": "The replication do-file explicitly adds newer waves (2012, 2014, 2016, 2018) not in the original (OBrienReplication_OSF_Axxe_20201012.do: 'recreates ... using more recent versions ... 2012, 2014, 2016, 2018'). While the original focused on 2006\u20132010 (post_registration.json), we will test (a) the original period, (b) new waves only, and (c) all years to assess robustness and sample differences."
      },
      "notes": "Variables, recodes, and listwise deletion rules are derived directly from OBrienReplication_OSF_Axxe_20201012.do (e.g., recodes for binary science items, scales, bible_clean, reliten_clean). The Python script implements equivalent recoding and an EM-based latent class model for mixed categorical indicators under local independence. If the .dta read fails due to Stata file format, ask for a CSV export of the same table with identical variable names."
    },
    "planned_method": {
      "steps": "- Read /app/data/GSSreplication.dta and lowercase variable names.\n- Apply the exact recodes specified in the do-file to create *_clean variables for: binary science knowledge (hotcore_clean, radioact_clean, ... evolved_clean), scales (nextgen_clean, toofast_clean [reversed], advfront_clean, scibnfts_clean), bible_clean, reliten_clean, scistudy_clean.\n- Compute listwise deletion across all LCA indicators (vars_clean in the do-file) for each analysis subset.\n- Fit a 3-class latent class model (categorical indicators; local independence; EM with multiple random starts; weights wtss if available) separately for (a) all years, (b) years <= 2010, and (c) years > 2010.\n- Assign respondents to the class with highest posterior probability.\n- Label classes as Traditional, Modern, Post-secular using data-driven profiles: science knowledge mean (high/low), bible literalism (high/low), and acceptance of evolution/big bang (low for Post-secular despite high knowledge).\n- Create PostsecVsTrad indicator (1 = Post-secular; 0 = Traditional) and run the focal test: two-sample t-test of evolved_clean between the two groups. Also compute a two-proportion z-test as a robustness check.\n- Save results (class sizes, profiles, t-statistics, p-values, group means, Ns) to /app/data outputs.",
      "models": "Latent Class Analysis (categorical EM with local independence; 3 classes); two-sample t-test on evolved_clean; two-proportion z-test (robustness).",
      "outcome_variable": "evolved_clean (1 = accepts that humans evolved from other animals; 0 = otherwise) as recoded in the do-file.",
      "independent_variables": "Latent class membership: Post-secular vs Traditional (derived from LCA on indicators: science knowledge items, bible_clean, scistudy_clean, nextgen_clean, toofast_clean, advfront_clean, scibnfts_clean, reliten_clean).",
      "control_variables": "None in the focal test (mirrors the focal t-test in the do-file and the SCORE description).",
      "tools_software": "Python 3.10; pandas, numpy, scipy, statsmodels, pyreadstat (for reading Stata).",
      "planned_estimation_and_test": {
        "estimation": "Difference in mean of evolved_clean (equivalently, difference in acceptance proportions) between Post-secular and Traditional classes.",
        "test": "Two-sample t-test (Welch); two-proportion z-test as robustness."
      },
      "missing_data_handling": "Listwise deletion across the full LCA indicator set (vars_clean) as in the Stata do-file.",
      "multiple_testing_policy": "Not applicable (single focal test).",
      "inference_criteria": "Two-tailed tests; alpha = 0.05; focal directional check expects Post-secular < Traditional on acceptance of evolution."
    },
    "codebase": {
      "files": {
        "analysis/obrien_lca_replication__py.py": "Python replication script that: (1) reads /app/data/GSSreplication.dta; (2) applies Stata do-file recodes to create *_clean variables; (3) performs listwise deletion across LCA indicators; (4) fits a 3-class latent class model (categorical EM, multiple random starts, optional wtss weights); (5) labels classes based on science knowledge means, bible literalism, and evolution/big bang acceptance; (6) runs the focal two-sample t-test on evolved_clean between Post-secular and Traditional; (7) writes JSON and CSV outputs to /app/data.",
        "original_do/ OBrienReplication_OSF_Axxe_20201012.do": "Reference Stata file describing the cleaning, LCA specification, sample splits by year, and the focal t-test on evolved_clean. Not executed; logic translated into Python per RUN POLICY."
      },
      "notes": "All file IO is restricted to /app/data. The script uses pandas.read_stata (pyreadstat backend). If Stata file version incompatibility arises, provide a CSV export with identical columns at /app/data/GSSreplication.csv."
    },
    "docker_specs": {
      "base_image": "python:3.10-slim",
      "packages": {
        "python": [
          "pandas>=2.0.0",
          "numpy>=1.24.0",
          "scipy>=1.10.0",
          "statsmodels>=0.14.0",
          "pyreadstat>=1.2.4"
        ],
        "other": [
          "bash",
          "wget",
          "git"
        ]
      },
      "hardware": {
        "gpu_support": "false",
        "min_gpu_memory_gb": "0",
        "min_ram_gb": "4"
      },
      "volumes": [
        "./data:/app/data"
      ]
    },
    "analysis": {
      "instructions": "1) Place GSSreplication.dta at /app/data. 2) Run: python /app/analysis/obrien_lca_replication__py.py --data /app/data/GSSreplication.dta --out /app/data 3) Inspect /app/data/obrien_lca_replication_results.json and /app/data/obrien_lca_class_profiles.csv. 4) Verify class labeling by reviewing class profiles (science knowledge means, bible literalism rate, evolution acceptance) match Traditional, Modern, Post-secular descriptions.",
      "comparison_metrics": "Primary: difference in evolution acceptance (mean of evolved_clean) between Post-secular and Traditional; t-statistic and two-tailed p-value; direction (Post-secular < Traditional). Secondary: class proportions and profile patterns consistent with original typology."
    }
  }
}