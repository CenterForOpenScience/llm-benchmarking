{
  "replication_study": {
    "hypothesis": "Among GSS 2006/2008/2010 respondents classified into religio-scientific perspectives, the probability of endorsing that humans evolved from other animals is lower for the Post-secular class than for the Traditional class.",
    "study_type": "Observational",
    "data_plan": {
      "dataset_identifier": "GSSreplication.dta (GSS 2006, 2008, 2010 religio-scientific classes)",
      "source_type": "Survey (General Social Survey - GSS)",
      "wave_or_subset": "GSS 2006, 2008, and 2010 waves; modules on science attitudes/knowledge and religious items",
      "sample_size": "2901",
      "unit_of_analysis": "individual respondent",
      "access_details": "Provided locally in replication_data as GSSreplication.dta. At runtime, place the dataset at /app/data/GSSreplication.dta (or /app/data/GSSreplication.csv).",
      "qualification": {
        "explanation": "This dataset enables a direct replication of the focal claim because it appears to contain the same GSS waves and latent class membership needed for the test. Our Python script uses robust detection of the evolution item and class labels and reproduces the key comparison.",
        "similarity_to_original": "The original study uses the General Social Survey (GSS) 2006/2008/2010 waves with sample size 2,901 and latent classes Traditional, Modern, and Post-secular (post_registration.json; original_paper.pdf summary). The focal claim compares Post-secular vs Traditional on the evolution item (initial_details.txt). The replication dataset file GSSreplication.dta in replication_data is clearly aligned with this scope.",
        "deviation_from_original": "We do not re-estimate the latent classes via LCA; instead, we use the provided class membership presumed to be included in GSSreplication.dta (original paper used LCA selection via BIC/LMR, original_paper.pdf summary). The original paper notes survey design/missing data handling (post_registration.json). Our replication applies listwise deletion for the focal outcome and class, and includes an optional weighted analysis if a weight variable (e.g., wtssall) is available. This is a direct replication rather than a new sample; no additional GSS waves are added."
      },
      "notes": "Variable naming may differ from the original; the Python script detects evolution and class columns via name heuristics. Evolution responses are recoded to a binary variable (1 = endorses humans evolved; 0 otherwise), ignoring DK/NA. All files are read/written from /app/data. If the dataset is provided as CSV instead of DTA, the script will detect and load it. Weighted analysis is attempted if a common GSS weight (e.g., wtssall) is detected."
    },
    "planned_method": {
      "steps": [
        "Copy GSSreplication.dta (or GSSreplication.csv) into /app/data.",
        "Run the Python script replication_data/replicate_evolution_postsecular__py.py.",
        "Script loads /app/data/GSSreplication.(dta|csv) and detects the evolution item and class label column.",
        "Recode the evolution item to evol_binary (1 = endorses humans evolved from other animals; 0 otherwise).",
        "Normalize class labels to Traditional, Modern, Post-secular and subset to valid rows.",
        "Compute unweighted class-specific proportions and save to /app/data/replication_evolution_summary.csv.",
        "Estimate unweighted logistic regression evol_binary ~ C(class_norm) (Traditional as reference) and save results to /app/data/replication_evolution_results.json.",
        "If a survey weight is detected (e.g., wtssall), compute weighted class-specific proportions and fit a weighted GLM (Binomial) using freq_weights; append results to the same JSON."
      ],
      "models": "Unweighted binary logistic regression; Weighted GLM (Binomial) with frequency weights if a weight column is present. Descriptive difference in proportions (Post-secular vs Traditional).",
      "outcome_variable": "evol_binary: indicator for endorsement that humans evolved from other animals (1=yes, 0=no).",
      "independent_variables": "C(class_norm) with categories Traditional (reference), Modern, Post-secular.",
      "control_variables": "None (focal bivariate class comparison aligning with the claim).",
      "tools_software": "Python 3.10; pandas; statsmodels; numpy; pyreadstat (for .dta).",
      "planned_estimation_and_test": {
        "estimation": "Coefficient for Post-secular vs Traditional from the logit/GLM (log-odds) and class-specific proportions; optionally an odds ratio can be computed from the coefficient.",
        "test": "Wald z-test (two-tailed) on the Post-secular vs Traditional coefficient from the logistic/GLM model; assess p-value against alpha = 0.05."
      },
      "missing_data_handling": "Listwise deletion: exclude observations with missing/invalid responses for evol_binary or class_norm; ignore DK/refused for the evolution item.",
      "multiple_testing_policy": "Single focal outcome and contrast; no correction needed.",
      "inference_criteria": "Two-tailed alpha = 0.05. Expected direction: Post-secular < Traditional (negative coefficient). Consider both unweighted and weighted estimates; declare successful replication if the sign is negative and p < 0.05 in at least the primary (unweighted) model and the class-specific proportion for Post-secular is lower than Traditional; compare magnitude against the reported ~3% gap (initial_details.txt)."
    },
    "codebase": {
      "files": {
        "replicate_evolution_postsecular__py.py": "Entrypoint script (to run). Loads /app/data/GSSreplication.dta (or CSV), detects/recode the evolution item, normalizes class labels to Traditional/Modern/Post-secular, computes class-specific proportions, fits unweighted logistic regression evol_binary ~ C(class_norm) with Traditional as the reference, and saves outputs to /app/data (replication_evolution_summary.csv and replication_evolution_results.json). If a weight variable is detected (e.g., wtssall), also computes weighted proportions and a weighted GLM Binomial (freq_weights), appending to the JSON results."
      },
      "notes": "Ensure the dataset is at /app/data using one of the expected filenames (GSSreplication.dta or GSSreplication.csv). The code uses pandas.read_stata (requires pyreadstat) and statsmodels for inference. Outputs: replication_evolution_summary.csv (proportions) and replication_evolution_results.json (model coefficients, p-values, weighted results if available)."
    },
    "docker_specs": {
      "base_image": "python:3.10-slim",
      "packages": {
        "python": [
          "pip>=23.0.0",
          "setuptools>=68.0.0",
          "wheel>=0.40.0",
          "numpy>=1.23.0",
          "pandas>=1.5.0",
          "statsmodels>=0.13.0",
          "pyreadstat==1.2.7"
        ],
        "other": [
          "bash",
          "locales",
          "build-essential",
          "gcc",
          "g++",
          "make",
          "zlib1g-dev",
          "libbz2-dev"
        ]
      },
      "hardware": {
        "gpu_support": "false",
        "min_gpu_memory_gb": "0",
        "min_ram_gb": "2"
      },
      "volumes": [
        "./data:/app/data"
      ]
    },
    "analysis": {
      "instructions": [
        "Place the dataset file into the mounted volume at /app/data, using the name GSSreplication.dta (preferred) or GSSreplication.csv.",
        "Run: python replication_data/replicate_evolution_postsecular__py.py",
        "Check /app/data/replication_evolution_summary.csv for class-specific evolution endorsement proportions and /app/data/replication_evolution_results.json for model coefficients and p-values (and weighted results if a weight variable was detected).",
        "Interpret the coefficient for C(class_norm)[T.Post-secular] (vs Traditional): negative and p < 0.05 indicates that the Post-secular class is significantly less likely to endorse evolution than the Traditional class, consistent with the original claim."
      ],
      "comparison_metrics": [
        "Direction and significance of the Post-secular vs Traditional coefficient in the logistic/GLM model (expect negative, p < 0.05).",
        "Difference in class-specific proportions: Post-secular proportion endorsing evolution minus Traditional proportion (expect negative and around the reported magnitude of ~-0.03).",
        "Optional: Odds ratio for Post-secular vs Traditional derived from the logit coefficient (expect OR < 1)."
      ]
    }
  }
}